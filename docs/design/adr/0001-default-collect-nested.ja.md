---
title: デフォルトで入れ子関数を収集する
date: 2025-07-06
status: Accepted
---

# ADR 0001: デフォルトで入れ子関数を収集する

関連する提案: docs/design/proposals/0001-nested-function-collection.md

## 背景
提案 0001 では、ユーザーが入れ子関数の収集をオプトアウトできる `excludeNested` オプションの追加を説明している。目的は、他の関数内で宣言されたものを含め、重複している可能性のあるすべての関数を調査することでツールをより有用にすることだ。

## 決定
入れ子関数はデフォルトで収集される。コレクターと CLI は、必要ない場合に入れ子宣言をスキップする `excludeNested` フラグを公開する。

## 結果
- 入れ子関数を多用するプロジェクトにおいて、類似度検出が向上する。
- 大規模なコードベースではメモリ使用量と処理時間がわずかに増加するが、`--exclude-nested` で緩和できる。
